---
// ============================================================================
// IMPORTS - Updated to use shared components and utilities
// ============================================================================
import BaseLayout from "../layouts/BaseLayout.astro";
import ArcCanvas from "../components/ArcCanvas.astro";
import SiteHeader from "../components/SiteHeader.astro";
import PageNavigation from "../components/PageNavigation.astro";

// NEW: Import shared components
import Card from "../components/Card.astro";
import LinkButton from "../components/LinkButton.astro";
import StatusBadge from "../components/StatusBadge.astro";
import SectionHeader from "../components/SectionHeader.astro";

import "../styles/pages/projects.css";

// NEW: Import utilities and constants
import { withBase } from '../utils/paths';
import { buildSEO } from '../utils/seo';
import { EXTERNAL_LINKS } from '../config/constants';

// ============================================================================
// SEO - Simplified using buildSEO utility
// ============================================================================
const seo = buildSEO({
  title: "Projects",
  description: "Active research projects in plasma technology for ecological repair. Open, collaborative, and building in public.",
  path: "/projects",
  siteUrl: Astro.site,
});
---

<BaseLayout title={seo.title} description={seo.description} bodyClass="page-projects" seo={seo}>
  <ArcCanvas />
  <SiteHeader active="projects" />

  <main id="main-content" class="page-shell" aria-labelledby="projects-title">
    
    <!-- HERO SECTION - No changes -->
    <header class="projects-hero" aria-labelledby="projects-title">
      <p class="eyebrow">Early-Stage Collaborative Research</p>
      <h1 id="projects-title">Projects</h1>
      <p class="lead">
        Each project applies RE:TECH principles â€” open, safe, iterative â€” and follows arc^'s licensing and governance. 
        <strong>These are real-world challenges that need collaborative solutions.</strong> Whether you're testing a hypothesis, 
        building hardware, or bringing community knowledge â€” there's a way in.
      </p>
    </header>

    <!-- GETTING INVOLVED SECTION
         Keep ALL structure, only replace surface-panel wrappers and buttons -->
    <section class="getting-involved-section">
      <SectionHeader
        title="Getting Involved"
        subtitle="arc^ is in early stages, which means <strong>you can help shape the direction</strong> from the ground up."
        align="center"
        headingLevel="h2"
      />
      
      <div class="involvement-grid">
        <Card as="article" class="involvement-card">
          <div class="card-icon">ðŸŽ“</div>
          <h3>For Students</h3>
          <p>Working on a final year project, honours thesis, or PhD? You can explore arc^ projects as part of your coursework. You'll need to find supervisors at your institution who are willing to work within arc^'s open research framework.</p>
          <p class="card-note"><strong>What you'll need:</strong> A project proposal, supervisor approval, and commitment to open licensing.</p>
        </Card>

        <Card as="article" class="involvement-card">
          <div class="card-icon">ðŸ”¬</div>
          <h3>For Researchers</h3>
          <p>Independent researchers are welcome! Fair warning: there aren't public designs or protocols yet. But that's the opportunity â€” <strong>early contributors help define the methods and set the standards.</strong></p>
          <p class="card-note"><strong>What's available now:</strong> Research questions, literature leads, experimental frameworks to build together.</p>
        </Card>

        <Card as="article" class="involvement-card">
          <div class="card-icon">ðŸŒ±</div>
          <h3>Current Reality</h3>
          <p>arc^ is building in public, which means it's messy, evolving, and honest about uncertainty. The most valuable contribution right now is <strong>dialogue, co-design, and shaping direction together.</strong></p>
          <p class="card-note"><strong>Best way to start:</strong> Pick a project below that interests you, then reach out to discuss how we can collaborate.</p>
        </Card>
      </div>

      <div class="involvement-cta">
        <LinkButton href={EXTERNAL_LINKS.formURL} variant="primary" icon="external">
          Let's Talk
        </LinkButton>
      </div>
    </section>

    <!-- PROJECTS GRID
         Keep ALL structure, replace surface-panel and status badges -->
    <section class="all-projects-section" aria-labelledby="all-projects-heading">
      <SectionHeader
        title="Active Projects"
        align="center"
        headingLevel="h2"
      />
      
      <div class="projects-grid">
        
        <!-- PROJECT 1: Saltwater Irrigation -->
        <Card as="article" class="project-card">
          <div class="card-header">
            <h3>Saltwater Irrigation</h3>
            <StatusBadge status="early-idea" />
          </div>
          <p class="card-summary">Exploring strategies for salinity-tolerant cultivation and soil recovery.</p>
          <p class="card-updated">Last updated: October 2025</p>
          <div class="card-actions">
            <LinkButton href={withBase("/projects/saltwater")} variant="outline" icon="arrow-right">
              View Project
            </LinkButton>
          </div>
        </Card>

        <!-- PROJECT 2: PAW for Pathogens & Nutrients -->
        <Card as="article" class="project-card">
          <div class="card-header">
            <h3>PAW for Pathogens & Nutrients</h3>
            <StatusBadge status="early-idea" />
          </div>
          <p class="card-summary">Testing plasma-activated water for pathogen control and nutrient transformation.</p>
          <p class="card-updated">Last updated: October 2025</p>
          <div class="card-actions">
            <LinkButton href={withBase("/projects/paw-pathogens")} variant="outline" icon="arrow-right">
              View Project
            </LinkButton>
          </div>
        </Card>

        <!-- PROJECT 3: Airborne Pathogens -->
        <Card as="article" class="project-card">
          <div class="card-header">
            <h3>Low-Energy Plasma for Airborne Pathogens</h3>
            <StatusBadge status="early-idea" />
          </div>
          <p class="card-summary">Scalable sanitation without harsh chemicals for indoor air quality.</p>
          <p class="card-updated">Last updated: October 2025</p>
          <div class="card-actions">
            <LinkButton href={withBase("/projects/airborne")} variant="outline" icon="arrow-right">
              View Project
            </LinkButton>
          </div>
        </Card>

        <!-- PROJECT 4: Surface Decontamination -->
        <Card as="article" class="project-card">
          <div class="card-header">
            <h3>Surface Decontamination Without Harsh Chemicals</h3>
            <StatusBadge status="early-idea" />
          </div>
          <p class="card-summary">Plasma-based surface treatment for food prep, healthcare, and public spaces.</p>
          <p class="card-updated">Last updated: October 2025</p>
          <div class="card-actions">
            <LinkButton href={withBase("/projects/surface-decontamination")} variant="outline" icon="arrow-right">
              View Project
            </LinkButton>
          </div>
        </Card>

        <!-- PROJECT 5: Wetland & Riparian Support -->
        <Card as="article" class="project-card">
          <div class="card-header">
            <h3>Wetland & Riparian Support</h3>
            <StatusBadge status="early-idea" />
          </div>
          <p class="card-summary">PAW variants for water quality and species resilience in wetland ecosystems.</p>
          <p class="card-updated">Last updated: October 2025</p>
          <div class="card-actions">
            <LinkButton href={withBase("/projects/wetland")} variant="outline" icon="arrow-right">
              View Project
            </LinkButton>
          </div>
        </Card>

        <!-- PROJECT 6: Native Grasslands & Fire Management -->
        <Card as="article" class="project-card">
          <div class="card-header">
            <h3>Native Grasslands & Fire Management</h3>
            <StatusBadge status="early-idea" />
          </div>
          <p class="card-summary">Exploring low-intervention methods for grassland resilience and biodiversity.</p>
          <p class="card-updated">Last updated: October 2025</p>
          <div class="card-actions">
            <LinkButton href={withBase("/projects/grasslands")} variant="outline" icon="arrow-right">
              View Project
            </LinkButton>
          </div>
        </Card>

      </div>
    </section>

    <!-- PROPOSE YOUR OWN -->
    <Card as="section" class="propose-section">
      <SectionHeader
        title="Propose Your Own Project"
        align="center"
        headingLevel="h2"
      />
      <p>Have an idea that fits arc^'s mission? We're open to new directions. The only requirement is alignment with RE:TECH principles: open, safe, and iterative.</p>
      <LinkButton href={EXTERNAL_LINKS.formURL} variant="outline" icon="external">
        Submit a Project Idea
      </LinkButton>
    </Card>

    <!-- LEGAL & LICENSING -->
    <Card as="section" class="legal-section">
      <h3>Licensing & Governance</h3>
      <p>All arc^ research and outputs are licensed under <strong>CERN-OHL-S v2</strong> (hardware), <strong>CC BY-NC-SA 4.0</strong> (documentation), and <strong>AGPL-3.0</strong> (software).</p>
      <p>This ensures research remains open, attributable, and non-commercial. For full details, see the <a href={withBase("/docs/terms-of-use")}>Terms of Use</a>.</p>
    </Card>

  </main>

  <PageNavigation currentPage="projects" />
</BaseLayout>

<!-- 
============================================================================
MIGRATION SUMMARY - projects.astro
============================================================================

âœ… WHAT CHANGED (Minimal, preserving design):
1. Imports:
   - Added: Card, LinkButton, StatusBadge components
   - Added: withBase, buildSEO, EXTERNAL_LINKS utilities
   - Removed: Duplicate withBase function, manual SEO construction, hard-coded formURL

2. Replaced wrappers and specific elements:
   - <article class="surface-panel"> â†’ <Card as="article">
   - <span class="status-badge status-early-idea"> â†’ <StatusBadge status="early-idea" />
   - <a class="button button--outline"> â†’ <LinkButton variant="outline">
   - <a class="button button--primary"> â†’ <LinkButton variant="primary">
   - formURL â†’ EXTERNAL_LINKS.formURL (2 instances)

âœ… WHAT DIDN'T CHANGE (Preserved design):
- ALL section headers kept as-is (h2, h3 elements)
- ALL grid layouts (.involvement-grid, .projects-grid)
- ALL card internals (.involvement-card, .project-card classes)
- ALL existing CSS classes maintained
- Card structure (.card-header, .card-summary, .card-updated, .card-actions)
- Visual appearance should be IDENTICAL

âœ… NEW COMPONENT USED:
- StatusBadge component (replaces manual status badge spans)
  - Benefits: Consistent status styling, centralized in one component
  - Can easily add new status types in one place
  - All status badges across site will be consistent

============================================================================
-->