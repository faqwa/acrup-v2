---
// ============================================================================
// IMPORTS
// ============================================================================
import BaseLayout from "../layouts/BaseLayout.astro";
import ArcCanvas from "../components/ArcCanvas.astro";
import SiteHeader from "../components/SiteHeader.astro";
import PageNavigation from "../components/PageNavigation.astro";
import LinkButton from "../components/LinkButton.astro";
import '../styles/pages/home.css';

import { withBase } from '../utils/paths';
import { buildSEO } from '../utils/seo';
import { EXTERNAL_LINKS } from '../config/constants';

// ============================================================================
// SEO
// ============================================================================
const seo = buildSEO({
  title: "arc^",
  description: "ArcUp is an open experimental research framework for regenerative plasma technology. We share our methods, data, and designs openly—guided by the Repractice Ethical Framework.",
  path: "/",
  siteUrl: Astro.site,
});
---

<BaseLayout 
  title={seo.title}
  description={seo.description} 
  bodyClass="page-home" 
  seo={seo}
>
  <ArcCanvas />
  <SiteHeader active="home" />

  <main id="main-content" class="page-shell" aria-labelledby="main-title">

    <!-- ========================================================================
         HERO SECTION — Core Message
         ======================================================================== -->
    <header class="home-hero" aria-labelledby="main-title">
      <p class="eyebrow">Open Research for a Living Earth</p>
      <h1 id="main-title">arc^</h1>
      <p class="lead home-lede">
        ArcUp builds and tests <strong>plasma-based systems for ecological regeneration</strong>.  
        We bring together researchers, builders, and communities to develop technology that serves life over profit.
      </p>
      <p class="home-context">
        Our work is guided by the <a href="https://repractice.xbyali.page" class="underline">Repractice Ethical Framework</a>—
        ensuring all research remains open, regenerative, and accountable to the commons.
      </p>

      <div class="hero-actions">
        <LinkButton href={withBase("/projects")} variant="primary" icon="arrow-right">
          Explore Projects
        </LinkButton>
        <LinkButton href={withBase("/how")} variant="outline" icon="arrow-right">
          See How We Work
        </LinkButton>
      </div>
    </header>

    <!-- ========================================================================
         SITE NAVIGATION — Key Pages
         ======================================================================== -->
    <nav class="home-nav-cards" aria-label="Main site sections">
      <a href={withBase("/about")} class="nav-card">
        <h3>About</h3>
        <p>Learn where ArcUp began and how it aligns with Repractice ethics</p>
        <span class="nav-card-arrow" aria-hidden="true">→</span>
      </a>

      <a href={withBase("/projects")} class="nav-card">
        <h3>Projects</h3>
        <p>Explore open plasma research and ecological applications</p>
        <span class="nav-card-arrow" aria-hidden="true">→</span>
      </a>

      <a href={withBase("/how")} class="nav-card">
        <h3>How We Work</h3>
        <p>Discover our methods, ethics, and approach to open experimentation</p>
        <span class="nav-card-arrow" aria-hidden="true">→</span>
      </a>

      <a href={withBase("/join")} class="nav-card">
        <h3>Join</h3>
        <p>Collaborate with us—engineers, scientists, and storytellers welcome</p>
        <span class="nav-card-arrow" aria-hidden="true">→</span>
      </a>
    </nav>

  </main>

  <PageNavigation currentPage="home" />

  <!-- ========================================================================
       AUDIO PRONUNCIATION SCRIPT
       ======================================================================== -->
  <script>
    const btn = document.querySelector('.audio-button');
    if (btn) {
      btn.addEventListener('click', () => {
        const base = import.meta.env.BASE_URL || '/';
        const audioPath = `${base}audio/EN-AU_ck1_arc_up.mp3`.replace('//', '/');
        const audio = new Audio(audioPath);

        audio.play().catch(err => {
          console.error('Audio playback failed:', err);
          if ('speechSynthesis' in window) {
            const utterance = new SpeechSynthesisUtterance('arc up');
            utterance.rate = 0.8;
            utterance.pitch = 1;
            window.speechSynthesis.speak(utterance);
          }
        });
      });
    }
  </script>
</BaseLayout>
